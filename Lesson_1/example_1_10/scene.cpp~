#include "scene.h"

Scene::Scene(QWidget *parent)
    : QGLWidget(parent)
{
    timer = new QTimer(this);
    timer->setInterval(33);
    connect(timer,SIGNAL(timeout()),this,SLOT(updateGL()));
    timer->start();
}

void Scene::initializeGL()
{
    glClearColor(0.0,0.0,0.0,0.0);
}

void Scene::resizeGL(int w, int h)
{
    glViewport(0,0,(GLsizei)w,(GLsizei)h);
    gluOrtho2D(0.0,350.0,0.0,150.0); //Изменим координатную плоскость
}

void Scene::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT);

    //Описываем шаблоны

    GLubyte fly[]= {
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x03,0x80,0x01,0xC0,0x06,0xC0,0x03,0x60,
    0x04,0x60,0x06,0x20,0x04,0x30,0x0C,0x20,
    0x04,0x18,0x18,0x20,0x04,0x0C,0x30,0x20,
    0x04,0x06,0x60,0x20,0x44,0x03,0xC0,0x22,
    0x44,0x01,0x80,0x22,0x44,0x01,0x80,0x22,
    0x44,0x01,0x80,0x22,0x44,0x01,0x80,0x22,
    0x44,0x01,0x80,0x22,0x44,0x01,0x80,0x22,
    0x66,0x01,0x80,0x66,0x33,0x01,0x80,0xCC,
    0x19,0x81,0x81,0x98,0x0C,0xC1,0x83,0x30,
    0x07,0xE1,0x87,0xE0,0x03,0x3F,0xFC,0xC0,
    0x03,0x31,0x8C,0xC0,0x03,0x33,0xCC,0xC0,
    0x06,0x64,0x26,0x60,0x0C,0xCC,0x33,0x30,
    0x18,0xCC,0x33,0x18,0x10,0xC4,0x23,0x08,
    0x10,0x63,0xC6,0x08,0x10,0x30,0x0C,0x08,
    0x10,0x18,0x18,0x08,0x10,0x00,0x00,0x08
    };

    GLubyte halftone[] = {
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
    0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55
    };

    //Рисуем один нешаблонированный прямоугольник
    //и два шаблоннированных
    glRectf(25.0,25.0,125.0,125.0);
    glEnable(GL_POLYGON_STIPPLE);
    glPolygonStipple(fly);
    glRectf(125.0,25.0,225.0,125.0);
    glPolygonStipple(halftone);
    glRectf(225.0,25.0,325.0,125.0);
    glDisable(GL_POLYGON_STIPPLE);

}

Scene::~Scene()
{

}

